apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: zeus
  name: zeus-elasticflow-sin01-1
  namespace: iaas-zeus
spec:
  replicas: 0
  selector:
    matchLabels:
      app.kubernetes.io/name: zeus
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      annotations:
        pod.boostport.com/vault-approle: iaas-zeus
        pod.boostport.com/vault-init-container: get-vault-token
      creationTimestamp: null
      labels:
        app.kubernetes.io/instance: zeus
        app.kubernetes.io/name: zeus
    spec:
      containers:
      - name: renewtoken-vault-sidecar
        image: registry-qa.webex.com/ciap/renewtoken-vault-sidecar:24
        imagePullPolicy: IfNotPresent
        args: ["8", "VAULT_TOKE_RENEW_NOTIFICATION", "http://triggerchain.prv.webex.com/notificationhub/notifydirectly"]
        volumeMounts:
          - mountPath: /var/run/secrets/boostport.com
            name: vault-token
        livenessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
        readinessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
      - env:
        - name: ZEUS_KAFKA_BOOTSTRAP_SERVER
          value: 10.254.206.87:9092,10.254.206.103:9092,10.254.206.109:9092
        - name: OKE_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ZEUS_KAFKA_CLIENT_ID
          value: client1
        - name: ELASTIFLOW_ES_HOST_1
          value: 10.250.79.198:9200
        - name: ELASTIFLOW_ES_HOST_2
          value: 10.250.79.200:9200
        - name: ZEUS_KAFKA_TOPIC
          value: zeus
        - name: ZEUS_KAFKA_CONSUMER_THREADS
          value: "8"
        - name: ELASTIFLOW_RESOLVE_IP2HOST
          value: "false"
        - name: ELASTIFLOW_NAMESERVER
          value: 10.240.240.1
        image: registry-qa.webex.com/ciap/zeus-elasticflow:0.0.22
        imagePullPolicy: IfNotPresent
        name: zeus-elasticflow
        resources:
          limits:
            cpu: "15"
            memory: 63Gi
          requests:
            cpu: 100m
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsUser: 0
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      dnsPolicy: ClusterFirst
      initContainers:
      - env:
        - name: VAULT_ROLE_ID
          value: 1f77368e-9119-2aab-0f89-ff8eaae34449
        image: registry-qa.webex.com/oke/kubernetes-vault-init:0.0.1
        imagePullPolicy: IfNotPresent
        name: get-vault-token
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      nodeSelector:
        kubernetes.io/hostname: oke-prod-ci22sj-a-worker-zeus-16
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      tolerations:
      - effect: NoSchedule
        key: app
        operator: Equal
        value: iaas-zeus
      volumes:
      - emptyDir: {}
        name: vault-token

---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: zeus
  name: zeus-elasticflow-sin01-2
  namespace: iaas-zeus
spec:
  replicas: 0
  selector:
    matchLabels:
      app.kubernetes.io/name: zeus
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      annotations:
        pod.boostport.com/vault-approle: iaas-zeus
        pod.boostport.com/vault-init-container: get-vault-token
      creationTimestamp: null
      labels:
        app.kubernetes.io/instance: zeus
        app.kubernetes.io/name: zeus
    spec:
      containers:
      - name: renewtoken-vault-sidecar
        image: registry-qa.webex.com/ciap/renewtoken-vault-sidecar:24
        imagePullPolicy: IfNotPresent
        args: ["8", "VAULT_TOKE_RENEW_NOTIFICATION", "http://triggerchain.prv.webex.com/notificationhub/notifydirectly"]
        volumeMounts:
          - mountPath: /var/run/secrets/boostport.com
            name: vault-token
        livenessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
        readinessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
      - env:
        - name: ZEUS_KAFKA_BOOTSTRAP_SERVER
          value: 10.254.206.87:9092,10.254.206.103:9092,10.254.206.109:9092
        - name: OKE_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ZEUS_KAFKA_CLIENT_ID
          value: client2
        - name: ELASTIFLOW_ES_HOST_1
          value: 10.250.79.198:9200
        - name: ELASTIFLOW_ES_HOST_2
          value: 10.250.79.200:9200
        - name: ZEUS_KAFKA_TOPIC
          value: zeus
        - name: ZEUS_KAFKA_CONSUMER_THREADS
          value: "8"
        - name: ELASTIFLOW_RESOLVE_IP2HOST
          value: "false"
        - name: ELASTIFLOW_NAMESERVER
          value: 10.240.240.1
        image: registry-qa.webex.com/ciap/zeus-elasticflow:0.0.22
        imagePullPolicy: IfNotPresent
        name: zeus-elasticflow
        resources:
          limits:
            cpu: "15"
            memory: 63Gi
          requests:
            cpu: 100m
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsUser: 0
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      dnsPolicy: ClusterFirst
      initContainers:
      - env:
        - name: VAULT_ROLE_ID
          value: 1f77368e-9119-2aab-0f89-ff8eaae34449
        image: registry-qa.webex.com/oke/kubernetes-vault-init:0.0.1
        imagePullPolicy: IfNotPresent
        name: get-vault-token
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      nodeSelector:
        kubernetes.io/hostname: oke-prod-ci22sj-a-worker-zeus-16
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      tolerations:
      - effect: NoSchedule
        key: app
        operator: Equal
        value: iaas-zeus
      volumes:
      - emptyDir: {}
        name: vault-token
---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: zeus
  name: zeus-elasticflow-sin01-3
  namespace: iaas-zeus
spec:
  replicas: 0
  selector:
    matchLabels:
      app.kubernetes.io/name: zeus
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      annotations:
        pod.boostport.com/vault-approle: iaas-zeus
        pod.boostport.com/vault-init-container: get-vault-token
      creationTimestamp: null
      labels:
        app.kubernetes.io/instance: zeus
        app.kubernetes.io/name: zeus
    spec:
      containers:
      - name: renewtoken-vault-sidecar
        image: registry-qa.webex.com/ciap/renewtoken-vault-sidecar:24
        imagePullPolicy: IfNotPresent
        args: ["8", "VAULT_TOKE_RENEW_NOTIFICATION", "http://triggerchain.prv.webex.com/notificationhub/notifydirectly"]
        volumeMounts:
          - mountPath: /var/run/secrets/boostport.com
            name: vault-token
        livenessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
        readinessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
      - env:
        - name: ZEUS_KAFKA_BOOTSTRAP_SERVER
          value: 10.254.206.87:9092,10.254.206.103:9092,10.254.206.109:9092
        - name: OKE_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ZEUS_KAFKA_CLIENT_ID
          value: client3
        - name: ELASTIFLOW_ES_HOST_1
          value: 10.250.79.198:9200
        - name: ELASTIFLOW_ES_HOST_2
          value: 10.250.79.200:9200
        - name: ZEUS_KAFKA_TOPIC
          value: zeus
        - name: ZEUS_KAFKA_CONSUMER_THREADS
          value: "8"
        - name: ELASTIFLOW_RESOLVE_IP2HOST
          value: "false"
        - name: ELASTIFLOW_NAMESERVER
          value: 10.240.240.1
        image: registry-qa.webex.com/ciap/zeus-elasticflow:0.0.22
        imagePullPolicy: IfNotPresent
        name: zeus-elasticflow
        resources:
          limits:
            cpu: "15"
            memory: 63Gi
          requests:
            cpu: 100m
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsUser: 0
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      dnsPolicy: ClusterFirst
      initContainers:
      - env:
        - name: VAULT_ROLE_ID
          value: 1f77368e-9119-2aab-0f89-ff8eaae34449
        image: registry-qa.webex.com/oke/kubernetes-vault-init:0.0.1
        imagePullPolicy: IfNotPresent
        name: get-vault-token
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      nodeSelector:
        kubernetes.io/hostname: oke-prod-ci22sj-a-worker-zeus-16
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      tolerations:
      - effect: NoSchedule
        key: app
        operator: Equal
        value: iaas-zeus
      volumes:
      - emptyDir: {}
        name: vault-token
---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: zeus
  name: zeus-elasticflow-sin01-4
  namespace: iaas-zeus
spec:
  replicas: 0
  selector:
    matchLabels:
      app.kubernetes.io/name: zeus
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      annotations:
        pod.boostport.com/vault-approle: iaas-zeus
        pod.boostport.com/vault-init-container: get-vault-token
      creationTimestamp: null
      labels:
        app.kubernetes.io/instance: zeus
        app.kubernetes.io/name: zeus
    spec:
      containers:
      - name: renewtoken-vault-sidecar
        image: registry-qa.webex.com/ciap/renewtoken-vault-sidecar:24
        imagePullPolicy: IfNotPresent
        args: ["8", "VAULT_TOKE_RENEW_NOTIFICATION", "http://triggerchain.prv.webex.com/notificationhub/notifydirectly"]
        volumeMounts:
          - mountPath: /var/run/secrets/boostport.com
            name: vault-token
        livenessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
        readinessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
      - env:
        - name: ZEUS_KAFKA_BOOTSTRAP_SERVER
          value: 10.254.206.87:9092,10.254.206.103:9092,10.254.206.109:9092
        - name: OKE_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ZEUS_KAFKA_CLIENT_ID
          value: client4
        - name: ELASTIFLOW_ES_HOST_1
          value: 10.250.79.198:9200
        - name: ELASTIFLOW_ES_HOST_2
          value: 10.250.79.200:9200
        - name: ZEUS_KAFKA_TOPIC
          value: zeus
        - name: ZEUS_KAFKA_CONSUMER_THREADS
          value: "8"
        - name: ELASTIFLOW_RESOLVE_IP2HOST
          value: "false"
        - name: ELASTIFLOW_NAMESERVER
          value: 10.240.240.1
        image: registry-qa.webex.com/ciap/zeus-elasticflow:0.0.22
        imagePullPolicy: IfNotPresent
        name: zeus-elasticflow
        resources:
          limits:
            cpu: "15"
            memory: 63Gi
          requests:
            cpu: 100m
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsUser: 0
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      dnsPolicy: ClusterFirst
      initContainers:
      - env:
        - name: VAULT_ROLE_ID
          value: 1f77368e-9119-2aab-0f89-ff8eaae34449
        image: registry-qa.webex.com/oke/kubernetes-vault-init:0.0.1
        imagePullPolicy: IfNotPresent
        name: get-vault-token
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      nodeSelector:
        kubernetes.io/hostname: oke-prod-ci22sj-a-worker-zeus-16
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      tolerations:
      - effect: NoSchedule
        key: app
        operator: Equal
        value: iaas-zeus
      volumes:
      - emptyDir: {}
        name: vault-token
---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: zeus
  name: zeus-elasticflow-sin01-5
  namespace: iaas-zeus
spec:
  replicas: 0
  selector:
    matchLabels:
      app.kubernetes.io/name: zeus
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      annotations:
        pod.boostport.com/vault-approle: iaas-zeus
        pod.boostport.com/vault-init-container: get-vault-token
      creationTimestamp: null
      labels:
        app.kubernetes.io/instance: zeus
        app.kubernetes.io/name: zeus
    spec:
      containers:
      - name: renewtoken-vault-sidecar
        image: registry-qa.webex.com/ciap/renewtoken-vault-sidecar:24
        imagePullPolicy: IfNotPresent
        args: ["8", "VAULT_TOKE_RENEW_NOTIFICATION", "http://triggerchain.prv.webex.com/notificationhub/notifydirectly"]
        volumeMounts:
          - mountPath: /var/run/secrets/boostport.com
            name: vault-token
        livenessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
        readinessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
      - env:
        - name: ZEUS_KAFKA_BOOTSTRAP_SERVER
          value: 10.254.206.87:9092,10.254.206.103:9092,10.254.206.109:9092
        - name: OKE_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ZEUS_KAFKA_CLIENT_ID
          value: client5
        - name: ELASTIFLOW_ES_HOST_1
          value: 10.250.79.198:9200
        - name: ELASTIFLOW_ES_HOST_2
          value: 10.250.79.200:9200
        - name: ZEUS_KAFKA_TOPIC
          value: zeus
        - name: ZEUS_KAFKA_CONSUMER_THREADS
          value: "8"
        - name: ELASTIFLOW_RESOLVE_IP2HOST
          value: "false"
        - name: ELASTIFLOW_NAMESERVER
          value: 10.240.240.1
        image: registry-qa.webex.com/ciap/zeus-elasticflow:0.0.22
        imagePullPolicy: IfNotPresent
        name: zeus-elasticflow
        resources:
          limits:
            cpu: "15"
            memory: 63Gi
          requests:
            cpu: 100m
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsUser: 0
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      dnsPolicy: ClusterFirst
      initContainers:
      - env:
        - name: VAULT_ROLE_ID
          value: 1f77368e-9119-2aab-0f89-ff8eaae34449
        image: registry-qa.webex.com/oke/kubernetes-vault-init:0.0.1
        imagePullPolicy: IfNotPresent
        name: get-vault-token
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      nodeSelector:
        kubernetes.io/hostname: oke-prod-ci22sj-a-worker-zeus-16
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      tolerations:
      - effect: NoSchedule
        key: app
        operator: Equal
        value: iaas-zeus
      volumes:
      - emptyDir: {}
        name: vault-token
---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: zeus
  name: zeus-elasticflow-sin01-6
  namespace: iaas-zeus
spec:
  replicas: 0
  selector:
    matchLabels:
      app.kubernetes.io/name: zeus
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      annotations:
        pod.boostport.com/vault-approle: iaas-zeus
        pod.boostport.com/vault-init-container: get-vault-token
      creationTimestamp: null
      labels:
        app.kubernetes.io/instance: zeus
        app.kubernetes.io/name: zeus
    spec:
      containers:
      - name: renewtoken-vault-sidecar
        image: registry-qa.webex.com/ciap/renewtoken-vault-sidecar:24
        imagePullPolicy: IfNotPresent
        args: ["8", "VAULT_TOKE_RENEW_NOTIFICATION", "http://triggerchain.prv.webex.com/notificationhub/notifydirectly"]
        volumeMounts:
          - mountPath: /var/run/secrets/boostport.com
            name: vault-token
        livenessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
        readinessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
      - env:
        - name: ZEUS_KAFKA_BOOTSTRAP_SERVER
          value: 10.254.206.87:9092,10.254.206.103:9092,10.254.206.109:9092
        - name: OKE_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ZEUS_KAFKA_CLIENT_ID
          value: client6
        - name: ELASTIFLOW_ES_HOST_1
          value: 10.250.79.198:9200
        - name: ELASTIFLOW_ES_HOST_2
          value: 10.250.79.200:9200
        - name: ZEUS_KAFKA_TOPIC
          value: zeus
        - name: ZEUS_KAFKA_CONSUMER_THREADS
          value: "8"
        - name: ELASTIFLOW_RESOLVE_IP2HOST
          value: "false"
        - name: ELASTIFLOW_NAMESERVER
          value: 10.240.240.1
        image: registry-qa.webex.com/ciap/zeus-elasticflow:0.0.22
        imagePullPolicy: IfNotPresent
        name: zeus-elasticflow
        resources:
          limits:
            cpu: "15"
            memory: 63Gi
          requests:
            cpu: 100m
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsUser: 0
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      dnsPolicy: ClusterFirst
      initContainers:
      - env:
        - name: VAULT_ROLE_ID
          value: 1f77368e-9119-2aab-0f89-ff8eaae34449
        image: registry-qa.webex.com/oke/kubernetes-vault-init:0.0.1
        imagePullPolicy: IfNotPresent
        name: get-vault-token
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      nodeSelector:
        kubernetes.io/hostname: oke-prod-ci22sj-a-worker-zeus-16
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      tolerations:
      - effect: NoSchedule
        key: app
        operator: Equal
        value: iaas-zeus
      volumes:
      - emptyDir: {}
        name: vault-token
---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: zeus
  name: zeus-elasticflow-sin01-7
  namespace: iaas-zeus
spec:
  replicas: 0
  selector:
    matchLabels:
      app.kubernetes.io/name: zeus
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      annotations:
        pod.boostport.com/vault-approle: iaas-zeus
        pod.boostport.com/vault-init-container: get-vault-token
      creationTimestamp: null
      labels:
        app.kubernetes.io/instance: zeus
        app.kubernetes.io/name: zeus
    spec:
      containers:
      - name: renewtoken-vault-sidecar
        image: registry-qa.webex.com/ciap/renewtoken-vault-sidecar:24
        imagePullPolicy: IfNotPresent
        args: ["8", "VAULT_TOKE_RENEW_NOTIFICATION", "http://triggerchain.prv.webex.com/notificationhub/notifydirectly"]
        volumeMounts:
          - mountPath: /var/run/secrets/boostport.com
            name: vault-token
        livenessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
        readinessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
      - env:
        - name: ZEUS_KAFKA_BOOTSTRAP_SERVER
          value: 10.254.206.87:9092,10.254.206.103:9092,10.254.206.109:9092
        - name: OKE_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ZEUS_KAFKA_CLIENT_ID
          value: client7
        - name: ELASTIFLOW_ES_HOST_1
          value: 10.250.79.198:9200
        - name: ELASTIFLOW_ES_HOST_2
          value: 10.250.79.200:9200
        - name: ZEUS_KAFKA_TOPIC
          value: zeus
        - name: ZEUS_KAFKA_CONSUMER_THREADS
          value: "8"
        - name: ELASTIFLOW_RESOLVE_IP2HOST
          value: "false"
        - name: ELASTIFLOW_NAMESERVER
          value: 10.240.240.1
        image: registry-qa.webex.com/ciap/zeus-elasticflow:0.0.22
        imagePullPolicy: IfNotPresent
        name: zeus-elasticflow
        resources:
          limits:
            cpu: "15"
            memory: 63Gi
          requests:
            cpu: 100m
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsUser: 0
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      dnsPolicy: ClusterFirst
      initContainers:
      - env:
        - name: VAULT_ROLE_ID
          value: 1f77368e-9119-2aab-0f89-ff8eaae34449
        image: registry-qa.webex.com/oke/kubernetes-vault-init:0.0.1
        imagePullPolicy: IfNotPresent
        name: get-vault-token
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      nodeSelector:
        kubernetes.io/hostname: oke-prod-ci22sj-a-worker-zeus-16
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      tolerations:
      - effect: NoSchedule
        key: app
        operator: Equal
        value: iaas-zeus
      volumes:
      - emptyDir: {}
        name: vault-token
---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: zeus
  name: zeus-elasticflow-sin01-8
  namespace: iaas-zeus
spec:
  replicas: 0
  selector:
    matchLabels:
      app.kubernetes.io/name: zeus
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      annotations:
        pod.boostport.com/vault-approle: iaas-zeus
        pod.boostport.com/vault-init-container: get-vault-token
      creationTimestamp: null
      labels:
        app.kubernetes.io/instance: zeus
        app.kubernetes.io/name: zeus
    spec:
      containers:
      - name: renewtoken-vault-sidecar
        image: registry-qa.webex.com/ciap/renewtoken-vault-sidecar:24
        imagePullPolicy: IfNotPresent
        args: ["8", "VAULT_TOKE_RENEW_NOTIFICATION", "http://triggerchain.prv.webex.com/notificationhub/notifydirectly"]
        volumeMounts:
          - mountPath: /var/run/secrets/boostport.com
            name: vault-token
        livenessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
        readinessProbe:
          exec:
            command:
            - /bin/bash
            - ./checkhealth.sh
      - env:
        - name: ZEUS_KAFKA_BOOTSTRAP_SERVER
          value: 10.254.206.87:9092,10.254.206.103:9092,10.254.206.109:9092
        - name: OKE_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ZEUS_KAFKA_CLIENT_ID
          value: client8
        - name: ELASTIFLOW_ES_HOST_1
          value: 10.250.79.198:9200
        - name: ELASTIFLOW_ES_HOST_2
          value: 10.250.79.200:9200
        - name: ZEUS_KAFKA_TOPIC
          value: zeus
        - name: ZEUS_KAFKA_CONSUMER_THREADS
          value: "8"
        - name: ELASTIFLOW_RESOLVE_IP2HOST
          value: "false"
        - name: ELASTIFLOW_NAMESERVER
          value: 10.240.240.1
        image: registry-qa.webex.com/ciap/zeus-elasticflow:0.0.22
        imagePullPolicy: IfNotPresent
        name: zeus-elasticflow
        resources:
          limits:
            cpu: "15"
            memory: 63Gi
          requests:
            cpu: 100m
            memory: 2Gi
        securityContext:
          allowPrivilegeEscalation: false
          runAsUser: 0
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      dnsPolicy: ClusterFirst
      initContainers:
      - env:
        - name: VAULT_ROLE_ID
          value: 1f77368e-9119-2aab-0f89-ff8eaae34449
        image: registry-qa.webex.com/oke/kubernetes-vault-init:0.0.1
        imagePullPolicy: IfNotPresent
        name: get-vault-token
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/run/secrets/boostport.com
          name: vault-token
      nodeSelector:
        kubernetes.io/hostname: oke-prod-ci22sj-a-worker-zeus-16
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      tolerations:
      - effect: NoSchedule
        key: app
        operator: Equal
        value: iaas-zeus
      volumes:
      - emptyDir: {}
        name: vault-token